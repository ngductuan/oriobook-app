#    container_name: kibana
#    image: docker.elastic.co/kibana/kibana:8.7.1
#    ports:
#      - "5601:5601"
#    volumes:
#      - ./kibana/kibana.yml:/usr/share/kibana/config/kibana.yml
##    environment:
##      - ELASTICSEARCH_HOST=elasticsearch
#    environment:
#      - ELASTICSEARCH_HOSTS=http://elasticsearch:9200
#    depends_on:
#      - elasticsearch
#    networks:
#      - elk
kibana:
  container_name: kibana
  image: docker.elastic.co/kibana/kibana:8.7.1
  ports:
    - "5601:5601"
  environment:
    SERVER_NAME: localhost
    #      ELASTICSEARCH_HOSTS: '["http://elasticsearch:9200"]'
    ELASTICSEARCH_HOSTS: http://elasticsearch:9200
  depends_on:
    - elasticsearch
  networks:
    - elk

logstash:
  image: docker.elastic.co/logstash/logstash:8.7.1
  container_name: logstash
  volumes:
    - ./logstash/config/logstash.yml:/usr/share/logstash/config/logstash.yml:ro
    - ./logstash/pipeline:/usr/share/logstash/pipeline:ro
  ports:
    - "5044:5044"
    - "9600:9600"
  environment:
    - LS_JAVA_OPTS=-Xmx256m -Xms256m
      #      - ELASTICSEARCH_HOST=elasticsearch
      59,1          64%